// >--------------------------------------------------------------------------------------------<
// >> BLP Lab v0.5.0 readme file (Russian version)
// >--------------------------------------------------------------------------------------------<

[ ПРЕДУПРЕЖДЕНИЕ ]
ДАННАЯ ПРОГРАММА РАСПРОСТРАНЯЕТСЯ "КАК ЕСТЬ". НИКАКОЙ ГАРАНТИИ НЕ ДАЕТСЯ. ВЫ ИСПОЛЬЗУЕТЕ ЕЕ НА СВОЙ СТРАХ И РИСК. АВТОР НЕ БУДЕТ НЕСТИ ОТВЕТСТВЕННОСТЬ ЗА ПОТЕРЮ, ПОВРЕЖДЕНИЕ ДАННЫХ, ПОТЕРЮ ПОЛЬЗЫ ИЛИ ЛЮБОЙ ДРУГОЙ ВИД ПОТЕРИ ПРИ ИСПОЛЬЗОВАНИИ ДАННОЙ ПРОГРАММЫ.



[ СОДЕРЖАНИЕ ]
- Описание
- Окно "Массовый конвертер"
- Окно "Массовый BLP оптимизатор"
- Окно "Настройки BLP"
- Окно "BLP комментарий"
- Окно "Альфа-канал"
- О программе
- История версий



[ ОПИСАНИЕ ]
BLP Laboratory (BLP Lab) - программа для работы с текстурами в формате BLP. "Работа" подразумевает просмотр, конвертирование и кое-что еще. Возможности:
- Работает с форматами BMP, JPG, TGA, PNG, BLP (в том числе и BLP2), DDS (с простыми форматами);
- Позволяет массово конвертировать файлы;
- Может добавлять/убирать альфа-канал при сохранении;
- Выдает подробную информацию об открытом файле;
- Предоставляет различные настройки для сохранения файла;
- Может оптимизировать BLP для уменьшения размера файлов (не влияет на качество);
- Позволяет просмотреть прозрачность и альфа-канал.



[ МАССОВЫЙ КОНВЕРТЕР ]
Это окно позволяет сконвертировать множество файлов в выбранный формат.

- Исходные форматы -
Здесь можно выбрать, файлы каких расширений будут обрабатываться. По умолчанию включено все.

- Формат назначения -
Выбор выходного формата для обработанных файлов.

- Исходная папка -
Где брать файлы для обработки.

- Обрабатывать файлы в подпапках -
Позволяет обрабатывать все файлы (а не только те, что лежат в корне) в выбранной папке.

- Папка назначения -
Куда программа сохранит обработанные файлы.

- Сохранять структуру папок -
Как работает данная опция показано на примере:
Исходная папка			C:\input\
Один из исходных файлов		C:\input\Textures\tex.tga
Сконвертированный файл (без опции)	C:\output\tex.blp
Сконвертированный файл (с опцией)	C:\output\Textures\tex.blp



[ МАССОВЫЙ BLP ОПТИМИЗАТОР ]
Здесь имеется возможность оптимизировать BLP для уменьшения их веса. Должен отметить, что оптимизация не снижает качества изображения. Она просто убирает ненужную информацию из файла.

- Исходная папка -
Где брать файлы для обработки.

- Обрабатывать файлы в подпапках -
Позволяет обрабатывать все файлы (а не только те, что лежат в корне) в выбранной папке.

В этом окне имеется лог под полосой прогресса, в котором показываются имена оптимизированных файлов и разница в весе после оптимизации.



[ НАСТРОЙКИ BLP ]
Это окно предоставляет доступ к продвинутым настройкам форматов файлов.

==== НАСТРОЙКИ BLP 1

- Палитровый формат -
Изображение будет сохранено в качестве набора индексов с указанием на палитру. Палитра расположена сразу после заголовка BLP и имеет определенное число записей (256). В процессе обработки, если текущий цвет не будет найден в палитре, то он заменяется на приближенный цвет из палитры.

- Сжимать палитру -
Обычно размер палитры фиксирован и равен 1024 байтам. Эта опция позволяет уменьшить число записей в палитре до числа цветов изображения. Пример: нам нужно сохранить в BLP изображение с белым текстом на черном фоне. Когда выбрана эта опция, размер палитры будет равняться всего 8 байтам (2 цвета * 4 байта). Так же, как и опция "Объединение заголовков", это уменьшает размер файлов на выходе.

- Диффузия ошибок -
Подразумевается алгоритм Floyd-Steinberg (http://en.wikipedia.org/wiki/Floyd-Steinberg_dithering). Обычно после конвертирования многоцветного изображения в палитровый формат появляются артефакты и изображение в целом выглядит плохо. Эта опция позволяет сделать плавные переходы, поэтому оно будет выглядет лучше. Файлы, сохраненные с этой опцией, занимают больше места в архиве, чем файлы, сохраненные без нее.

- Сжатый формат -
Изображение будет сохранено в формате jpeg (http://ru.wikipedia.org/wiki/JPEG). Он наиболее применяем для изображений с большим количеством цветов. Размер файлов таких изображений практически не меняется, если поместить его MPQ (или любой другой архив). Поэтому формат и назван "сжатым". Изображение может быть сохранено с определенным качеством 1-100%. Spec рекомендует использовать 60-80%, что позволяет добиться хорошего качества при небольшом размере файла.

- Объединять заголовки -
Формат BLP позволяет иметь один jpeg заголовок для всех мипмапов в файле, что позволяет немного уменьшить размер этого файла. Эта опция генерирует такой заголовок. Также, она не будет иметь эффекта, если в поле "Число текстур" стоит "1".

- Прогрессивное кодирование -
Изображение будет сохранено в прогрессивном формате. Размер может колебаться (как в большую, так и в меньшую сторону) по сравнению со стандартным кодированием, но в архивах степень сжатия такого файла будет больше.

- Число текстур -
Число генерируемых мипмапов для изображения (http://ru.wikipedia.org/wiki/Mipmap).

==== НАСТРОЙКИ BLP 2

- Палитровый формат -
- Сжимать палитру -
- Диффузия ошибок -
Смотри "Настройки BLP 1".

- Сжатый формат -
Изображение будет сохранено в DXTC формате (http://en.wikipedia.org/wiki/S3TC). Этот алгоритм работает примерно так же, как и индексирование (создание палитры), но обрабатывает блоки 4х4 пикселя, поэтому качество изображения будет выше. Кроме того, сжатые таким образом файлы меньше по размеру, чем идентичные файлы в палитровом формате.

- Диффузия ошибок -
- Число текстур -
Смотри "Настройки BLP 1".

==== НАСТРОЙКИ DDS

- True Color -
Изображение будет сохранено в формате True Color (http://ru.wikipedia.org/wiki/True_color). Во время сохранения не будет производиться никаких цветовых или пиксельных трансформаций.

- Сжатый формат - 
Смотри "Настройки BLP 2".

- Диффузия ошибок -
- Число текстур -
Смотри "Настройки BLP 1".

==== НАСТРОЙКИ TGA

- Палитровый формат -
- Сжимать палитру -
- Диффузия ошибок -
Смотри "Настройки BLP 1".

- True Color -
Смотри "Настройки DDS".

- Начало координат в левом верхнем углу -
Первая линия изображения в TGA обычно начинается из нижнего левого угла. То есть просмотрщики изображений читают изображение отраженным. Эта опция позволяет установить нормальный порядок линий при сохранении. Иногда может быть полезно (к примеру, размер файла в архиве может быть меньше).

- Использовать RLE-кодирование -
Применяет RLE-кодирование при сохранении файла (http://ru.wikipedia.org/wiki/RLE). Это некоторый алгоритм сжатия, который поддерживается форматом TGA. Хорошо сжимает, если изображение имеет большие блоки одинаковых пикселей. Тем не менее, часто лучше иметь в архивах TGA файлы, НЕ сжатые с помощью RLE.

- Непрерывное кодирование -
Опция доступна, если включено использование RLE. При кодировании со включенной опцией, кодировщик игнорирует конец линии и продолжает записывать пакет данных с добавлением пикселей следующей линии. Это позволяет улучшить степень сжатия, но такие изображения не могут быть прочитаны правильно некоторыми программами. 

==== НАСТРОЙКИ PNG

- Степень сжатия -
Я думаю, что этот параметр не требует пояснений. Может принимать значения от 0 до 9. Больше значение - меньше размер файла.

- Фильтры -
Содержит опции для простых пиксельных операций, которые могут повысить сжимаемость изображения.

==== НАСТРОЙКИ JPG

- Качество -
Снова же, комментарии излишни. Значения варьируются от 1 до 100. Больше значение - лучше качество и больше размер файла.

- Прогрессивное кодирование -
Смотри "Настройки BLP 1".



[ АЛЬФА КАНАЛ ]
Это окно предоставляет настройки для простых манипуляций с альфа-каналом.
- Оставлять без изменений -
Без комментариев.

- Добавлять непрозрачный альфа-канал -
Добавляет альфа-канал, полностью заполненный белым цветом. Эта опция замещает имеющийся альфа-канал.

- Удалять/очищать альфа-канал -
Полностью удаляет альфа-канал в изображении. Исключение составляют сжатые BLP, потому что альфа-канал просто не может быть удален, поэтому он просто заполняется белым цветом.

- Spec сам решает, что делать с альфа-каналом -
Автоматически определяет для каждого файла, оставлять или удалять альфа-канал.

- Прозрачная рамка в 1 пиксель -
Создает прозрачную рамку для корректного отображения картинки при использовании функции CreateImage().



[ BLP КОММЕНТАРИЙ ]
В этом окне можно добавить какие-либо комментарии в текущий файл. Комментарии добавляются в неиспользуемое пространство в заголовке BLP, поэтому файлы с комментариями и без них внешне не отличаются по весу. Максимально возможная длина комментария зависит от длины и ширины изображения.

В настоящий момент поддерживаются только комментарии в BLP1.



[ О ПРОГРАММЕ ]
Автор программы: Shadow Daemon (он же Spec).
- Toadcop - первый тестер и пользователь, нарисовал иконки для программы.
- NETRAT - множество идей и поиск багов.
- Dron, vsparker, Wolverine, Rewenger - тестирование и полезные идеи.



[ ИСТОРИЯ ВЕРСИЙ ]

[ 0.5.0.500 ] // [ 31.10.2010 ]

++ Добавлена поддержка сохранения BLP2 в палитровом и DXTC формате
++ Добавлена поддержка сохранения DDS в DXTC формате
++ Добавлена поддержка сохранения TGA в палитровом формате и c применением RLE
++ Добавлены опции сохранения для BLP2
++ Добавлены опции сохранения для DDS
++ Добавлены опции сохранения для TGA
++ Добавлены опции сохранения для PNG
++ Добавлены опции сохранения для JPG
++ Добавлено отображение информации о DDS файлах
++ Добавлено отображение информации о TGA файлах
++ Добавлено отображение информации о PNG файлах
++ Добавлено отображение информации о JPG файлах
++ Добавлены горячие клавиши для масштабирования (Ctrl и +/- на цифровой клавиатуре) и просмотра файлов (Ctrl+стрелки)
== Дополнена поддержка открытия PNG файлов (в палитровом формате)
== Ускорена загрузка JPG изображений
## Исправлен баг с показом битности альфа канала для палитровых BLP2
## Исправлен баг с масштабированием по методу Lanczos'a
## Исправлен баг с перемещением развернутого окна

[ 0.4.1.422 ] // [ 17.04.2010 ]
++ Добавлен файловый навигатор
++ Добавлена опция сохранения структуры папок в массовом конвертере
++ Добавлена оптимизация для палитровых BLP
## Исправлен баг с оптимизацией сжатых BLP с ложными мипмапами

[ 0.4.0.404 ] // [ 04.03.2010 ]
++ Добавлена оптимизация BLP
++ Добавлена опция добавления комментариев в BLP
++ Добавлен вариант создания прозрачной рамки в окно настроек альфа-канала
++ Добавлена частичная поддержка DDS (для простых текстур в форматах RGB и DXT)
== Изменен вид отображения информации о мипмапах
== Теперь окно изменяет размер при открытии более мелких изображений 
## Исправлен баг с определением качества BLP
## Исправлен баг с подсчетом количества записей в палитре
## Исправлен баг с некорректным отображением прозрачности
## Исправлен баг при масштабировании мелких мипмапов по методу Lanczos
## Исправлено определение расширений, записанных не в нижнем регистре, в массовом конвертере
## Исправлено определение BLP2 без альфа-канала

[ 0.3.2.362 ] // [ 11.11.2009 ]
++ Добавлено отображение качества BLP
++ Добавлено отображение типа кодирования JPEG в BLP
++ Добавлено опциональное использование Lanczos
++ Добавлена опциональная ассоциация BLP с программой
## Исправлен баг с отображением прозрачности
## Исправлен баг с полосами прокрутки
## Исправлен баг с открытием некоторых палитровых BLP

[ 0.3.1.333 ] // [02.09.2009]
++ Добавлен опциональный показ информации о BLP
++ Добавлен алгоритм ресэмплирования Lanczos для масштабирования
++ Добавлено центрирование изображения в окне
== Теперь степень изменения масштаба зависит от величины масштаба
## Исправлен баг с некорректным сохранением сжатого BLP без объединения заголовков
## Исправлен баг с открытием изображения в формате BMP, сохраненного в Photoshop'e
## Исправлены некоторые баги, связанные со сменой языков

[ 0.3.0.307 ] // [02.08.2009]
++ Добавлена поддержка BLP2 (открытие)
++ Добавлена поддержка диффузии ошибок (для палитровых BLP)
++ Добавлена поддержка прогрессивного кодирования (для сжатых BLP)
++ Добавлена возможность обрабатывать файлы в подпапках
## Исправлен баг с папками в массовом конвертере

[ 0.2.4.285 ] // [25.07.2009]
++ Добавлена поддержка PNG формата
++ Добавлена возможность подстраивать окно под размеры изображения
++ Добавлена возможность запускать только одну копию приложения
## Исправлен баг с мипмапами при открытии BLP через drag-n-drop
// Убран лимит 512x512 при сохранении в BLP

[ 0.2.3.265 ] // [22.07.2009]
++ Добавлена поддержка языков
++ Добавлена опция стилизации интерфейса под ОС
== Изменен метод выделения памяти для JPG
== Теперь текущее имя файла будет отображаться в заголовке на панели задач
## Исправлены ошибки, связанные с некорректным определением размера BLP
## Исправлена ошибка при открытии не 24 или 32 битного изображения
## Исправлена ошибка при загрузке и сохранении настроек BLP

[ 0.2.2.242 ] // [19.07.2009]
++ Добавлены кнопки "Show alpha" и "Show transparency" на панель
++ Добавлены сообщения для наиболее возможных исключений
++ Новые иконки для кнопок "Zoom in" и "Zoom out"
== Теперь текст в окнах редактирования может быть выделен клавишами CTRL+A
== Теперь, при сохранении в палитровый BLP, учитывается число цветов
## Исправлена ошибка, возникающая в конвертере, если исходная папка не содержит искомых файлов

[ 0.2.1.220 ] // [18.07.2009]
++ Добавлены загрузка и сохранение конфигурации в файл
== Теперь при переключении между мипмапами, число цветов пересчитывается

[ 0.2.0.213 ] // [15.07.2009]
++ Добавлены настройки для альфа-канала
== Теперь при переключении между мипмапами, масштаб также меняется
## Исправлен баг с размером при открытии сжатых BLP

[ 0.1.8.203 ] // [11.07.2009]
++ Добавлена полоса прогресса в конвертер
## Исправлены проблемы, связанные с размером мипмапов

[ 0.1.7.195 ] // [09.07.2009]
++ Добавлена возможность выбирать форматы изображения в конвертере
## Исправлен баг, связанный с сохранением в TGA
## Исправлен баг, связанный с сохранением в JPG

[ 0.1.6.184 ] // [03.07.2009]
++ Добавлена возможность масштабирования изображения

[ 0.1.5.179 ] // [27.06.2009]
++ Добавлены полосы прокрутки (появляются, если открыть файл с большими размерами)
++ Добавлена поддержка JPG
## Исправлен баг, связанный с загрузкой BMP

[ 0.1.4.166 ] // [21.06.2009]
++ Добавлена возможность открытия формата TGA RLE
++ Добавлено отображение размера спец. заголовка BLP
++ Добавлено отображение числа цветов

[ 0.1.3.151 ] // [17.06.2009]
++ Добавлена возможность drag-n-drop
++ Новая иконка и окно "О программе"
== Теперь имя открытого файла отображается в заголовке

[ 0.1.2.139 ] // [14.06.2009]
== Теперь информация о BLP очищается при открытии не-BLP файла
## Исправлен баг с расширениями при сохранении файла
## Исправлен тег ориентации изображения при сохранении в TGA

[ 0.1.2.131 ] // [07.06.2009]
## Исправлена ошибка, связанная с обратной чертой в пути
## Исправлена ошибка с сохранением изображения без альфа-канала в сжатый BLP

[ 0.1.2.125 ] // [ 30.05.2009 ]
++ Добавлен просмотр альфа-канала
++ Добавлен просмотр прозрачности
++ Добавлена поддержка форматов TGA и BMP

[ 0.1.1.110 ] // [ 24.05.2009 ]
++ Добавлен просмотр мипмапов
== Изменен интерфейс главного окна
## Исправлена ошибка, связанная с альфа-каналом

[ 0.1.0.100 ] // [ 17.04.2009 ]
^^ Первая версия